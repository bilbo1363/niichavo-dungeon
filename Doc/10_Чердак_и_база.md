# –ß–µ—Ä–¥–∞–∫ - –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è –∏ –±–∞–∑–∞ –∏–≥—Ä–æ–∫–∞

## 1. –û–±–∑–æ—Ä

**–ß–µ—Ä–¥–∞–∫** - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è –≤ –∏–≥—Ä–µ, —Å–ª—É–∂–∞—â–∞—è:
- –°—Ç–∞—Ä—Ç–æ–≤–æ–π —Ç–æ—á–∫–æ–π
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω–æ–π
- –ú–µ—Å—Ç–æ–º –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ë–∞–∑–æ–π –¥–ª—è –∫—Ä–∞—Ñ—Ç–∞ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
- –•—Ä–∞–Ω–∏–ª–∏—â–µ–º –ø—Ä–∏–ø–∞—Å–æ–≤

---

## 2. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ß–µ—Ä–¥–∞–∫–∞

### 2.1 –ü–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–æ
```python
class Attic:
    """–ß–µ—Ä–¥–∞–∫ - –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è"""
    
    def __init__(self):
        self.is_permanent = True  # –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ
        self.is_safe_zone = True  # –ù–µ—Ç –≤—Ä–∞–≥–æ–≤
        self.layout = self._load_fixed_layout()  # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞
        
        # –ó–æ–Ω—ã —á–µ—Ä–¥–∞–∫–∞
        self.rest_area = RestArea()      # –ö—Ä–æ–≤–∞—Ç—å
        self.storage = Storage()         # –°—É–Ω–¥—É–∫–∏
        self.crafting = CraftingArea()   # –í–µ—Ä—Å—Ç–∞–∫
        self.research = ResearchArea()   # –°—Ç–æ–ª –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
        self.entrance = DungeonEntrance() # –í—Ö–æ–¥ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ
```

### 2.2 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ **–ù–µ—Ç –≤—Ä–∞–≥–æ–≤** - –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ
- ‚úÖ **–ù–µ—Ç –ª–æ–≤—É—à–µ–∫** - –º–æ–∂–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è
- ‚úÖ **–ü–æ–ª–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ** - –Ω–µ—Ç —Ç—É–º–∞–Ω–∞ –≤–æ–π–Ω—ã
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - –∑–¥–æ—Ä–æ–≤—å–µ –∏ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è

---

## 3. –ó–æ–Ω—ã –ß–µ—Ä–¥–∞–∫–∞

### 3.1 –ó–æ–Ω–∞ –æ—Ç–¥—ã—Ö–∞

```python
class RestArea:
    """–ó–æ–Ω–∞ –æ—Ç–¥—ã—Ö–∞ —Å –∫—Ä–æ–≤–∞—Ç—å—é"""
    
    def __init__(self):
        self.bed = Bed()
        self.campfire = Campfire()
        
    def rest(self, player: Player, hours: int) -> dict:
        """–û—Ç–¥—ã—Ö –Ω–∞ –∫—Ä–æ–≤–∞—Ç–∏"""
        # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
        player.stats.health = player.stats.max_health
        player.stats.endurance = player.stats.max_endurance
        player.stats.thirst = 100
        player.stats.clarity = 100
        
        # –í—Ä–µ–º—è –≤ –∏–≥—Ä–µ
        game_time.advance(hours)
        
        # –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤–æ –≤—Ä–µ–º—è —Å–Ω–∞
        events = self._generate_sleep_events()
        
        return {
            "restored": True,
            "time_passed": hours,
            "events": events
        }
```

**–§—É–Ω–∫—Ü–∏–∏:**
- üõèÔ∏è **–ö—Ä–æ–≤–∞—Ç—å** - –ø–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- üî• **–ö–æ—Å—Ç–µ—Ä** - –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –µ–¥—ã
- üìñ **–î–Ω–µ–≤–Ω–∏–∫** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

### 3.2 –•—Ä–∞–Ω–∏–ª–∏—â–µ

```python
class Storage:
    """–°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ —á–µ—Ä–¥–∞–∫–µ"""
    
    def __init__(self):
        self.chests = {
            "weapons": Chest(capacity=20, type="weapons"),
            "armor": Chest(capacity=20, type="armor"),
            "runes": Chest(capacity=50, type="runes"),
            "materials": Chest(capacity=100, type="materials"),
            "food": Chest(capacity=30, type="consumables"),
            "artifacts": Chest(capacity=10, type="special")
        }
        
    def store_item(self, item: Item, chest_type: str) -> bool:
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ —Å—É–Ω–¥—É–∫"""
        chest = self.chests.get(chest_type)
        if chest and chest.has_space():
            chest.add_item(item)
            return True
        return False
        
    def retrieve_item(self, item_id: str, chest_type: str) -> Optional[Item]:
        """–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –∏–∑ —Å—É–Ω–¥—É–∫–∞"""
        chest = self.chests.get(chest_type)
        if chest:
            return chest.remove_item(item_id)
        return None
```

**–¢–∏–ø—ã —Å—É–Ω–¥—É–∫–æ–≤:**
- ‚öîÔ∏è **–û—Ä—É–∂–∏–µ** (20 —Å–ª–æ—Ç–æ–≤)
- üõ°Ô∏è **–ë—Ä–æ–Ω—è** (20 —Å–ª–æ—Ç–æ–≤)
- üîÆ **–†—É–Ω—ã** (50 —Å–ª–æ—Ç–æ–≤) - —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π!
- üîß **–ú–∞—Ç–µ—Ä–∏–∞–ª—ã** (100 —Å–ª–æ—Ç–æ–≤)
- üçñ **–ï–¥–∞ –∏ –∑–µ–ª—å—è** (30 —Å–ª–æ—Ç–æ–≤)
- ‚≠ê **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** (10 —Å–ª–æ—Ç–æ–≤)

### 3.3 –ó–æ–Ω–∞ –∫—Ä–∞—Ñ—Ç–∞

```python
class CraftingArea:
    """–ó–æ–Ω–∞ –∫—Ä–∞—Ñ—Ç–∞"""
    
    def __init__(self):
        self.workbench = Workbench()
        self.alchemy_table = AlchemyTable()
        self.enchanting_station = EnchantingStation()
        
    def craft_item(self, recipe: Recipe, materials: List[Item]) -> Optional[Item]:
        """–ö—Ä–∞—Ñ—Ç –ø—Ä–µ–¥–º–µ—Ç–∞"""
        if not self._check_materials(recipe, materials):
            return None
            
        # –†–∞—Å—Ö–æ–¥—É–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª—ã
        self._consume_materials(materials)
        
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥–º–µ—Ç
        item = recipe.create_item()
        
        # –®–∞–Ω—Å —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
        if random.random() < 0.1:  # 10% —à–∞–Ω—Å
            item.quality = "superior"
            
        return item
```

**–°—Ç–∞–Ω—Ü–∏–∏ –∫—Ä–∞—Ñ—Ç–∞:**

1. **–í–µ—Ä—Å—Ç–∞–∫** - –±–∞–∑–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
   - –û—Ä—É–∂–∏–µ (–Ω–æ–∂–∏, –¥—É–±–∏–Ω–∫–∏)
   - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–∫–∏—Ä–∫–∞, —Ñ–∞–∫–µ–ª)
   - –ü—Ä–æ—Å—Ç–∞—è –±—Ä–æ–Ω—è

2. **–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∏–π —Å—Ç–æ–ª** - –∑–µ–ª—å—è –∏ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏
   - –ó–µ–ª—å—è –∑–¥–æ—Ä–æ–≤—å—è
   - –ó–µ–ª—å—è –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏
   - –Ø–¥—ã –∏ –±–æ–º–±—ã

3. **–°—Ç–æ–ª –∑–∞—á–∞—Ä–æ–≤–∞–Ω–∏—è** - —Ä–∞–±–æ—Ç–∞ —Å —Ä—É–Ω–∞–º–∏
   - –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä—É–Ω
   - –£–ª—É—á—à–µ–Ω–∏–µ —Ä—É–Ω
   - –°–Ω—è—Ç–∏–µ –ø—Ä–æ–∫–ª—è—Ç–∏–π

### 3.4 –ó–æ–Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π

```python
class ResearchArea:
    """–ó–æ–Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π"""
    
    def __init__(self):
        self.research_table = ResearchTable()
        self.library = Library()
        self.map_table = MapTable()
        
    def research_riddle(self, riddle: RiddleData) -> dict:
        """–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∑–∞–≥–∞–¥–∫–∏"""
        # –ê–Ω–∞–ª–∏–∑ –∑–∞–≥–∞–¥–∫–∏
        hints = self._analyze_riddle(riddle)
        
        # –ü–æ–∏—Å–∫ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
        references = self.library.search(riddle.keywords)
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
        if riddle.coordinate_hint:
            self.map_table.mark_possible_location(hints['coordinates'])
            
        return {
            "hints": hints,
            "references": references,
            "confidence": self._calculate_confidence(hints)
        }
```

**–§—É–Ω–∫—Ü–∏–∏:**
- üìö **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞** - –∏–∑—É—á–µ–Ω–∏–µ –∑–∞–≥–∞–¥–æ–∫ –∏ –ø–æ–¥—Å–∫–∞–∑–æ–∫
- üó∫Ô∏è **–°—Ç–æ–ª —Å –∫–∞—Ä—Ç–æ–π** - –æ—Ç–º–µ—Ç–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π
- üî¨ **–°—Ç–æ–ª –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π** - –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

---

## 4. –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π

### 4.1 –¢–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

```python
class SaveSystem:
    """–°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π"""
    
    SAVE_LOCATIONS = {
        "attic_bed": {
            "name": "–ö—Ä–æ–≤–∞—Ç—å –Ω–∞ —á–µ—Ä–¥–∞–∫–µ",
            "type": "manual",
            "safe": True
        }
    }
    
    def can_save(self, location: str) -> bool:
        """–ú–æ–∂–Ω–æ –ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —ç—Ç–æ–π –ª–æ–∫–∞—Ü–∏–∏"""
        return location in self.SAVE_LOCATIONS
        
    def save_game(self, player: Player, slot: int) -> bool:
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã"""
        if not self.can_save(player.current_location):
            return False
            
        save_data = {
            "player": self._serialize_player(player),
            "world": self._serialize_world(),
            "runes": self._serialize_runes(),
            "riddles": self._serialize_riddles(),
            "timestamp": datetime.now(),
            "playtime": game_time.total_seconds
        }
        
        return self._write_save(save_data, slot)
```

### 4.2 –ü—Ä–∞–≤–∏–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è:**
- ‚úÖ –ù–∞ –∫—Ä–æ–≤–∞—Ç–∏ –Ω–∞ –ß–µ—Ä–¥–∞–∫–µ
- ‚úÖ –í –ª—é–±–æ–µ –≤—Ä–µ–º—è (–∫–æ–≥–¥–∞ –Ω–∞ –ß–µ—Ä–¥–∞–∫–µ)
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã (3 —Å–ª–æ—Ç–∞)

**–ù–µ–ª—å–∑—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è:**
- ‚ùå –í –ø–æ–¥–∑–µ–º–µ–ª—å–µ
- ‚ùå –í–æ –≤—Ä–µ–º—è –±–æ—è
- ‚ùå –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–∞—Ö

### 4.3 –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

```python
class AutoSave:
    """–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è"""
    
    def __init__(self, interval_minutes: int = 5):
        self.interval = interval_minutes * 60  # –í —Å–µ–∫—É–Ω–¥–∞—Ö
        self.last_save = 0
        self.enabled = True
        
    def update(self, dt: float, player: Player):
        """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è"""
        if not self.enabled:
            return
            
        self.last_save += dt
        
        # –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –ß–µ—Ä–¥–∞–∫–µ
        if self.last_save >= self.interval and player.location == "attic":
            self.perform_autosave(player)
            self.last_save = 0
            
    def perform_autosave(self, player: Player):
        """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è"""
        save_data = create_save_data(player)
        write_to_autosave_slot(save_data)
        show_notification("–ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞")
```

---

## 5. –í—Ö–æ–¥ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ

### 5.1 –õ—é–∫ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ

```python
class DungeonEntrance:
    """–í—Ö–æ–¥ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ"""
    
    def __init__(self):
        self.position = (30, 20)  # –¶–µ–Ω—Ç—Ä —á–µ—Ä–¥–∞–∫–∞
        self.is_open = True
        self.last_floor_visited = 0
        
    def enter_dungeon(self, player: Player, target_floor: int = None) -> bool:
        """–í—Ö–æ–¥ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å–µ"""
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
        if not self._check_player_ready(player):
            return False
            
        # –í—ã–±–æ—Ä —ç—Ç–∞–∂–∞
        floor = target_floor or (self.last_floor_visited + 1)
        
        # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
        if not player.is_prepared():
            show_warning("–í—ã —É–≤–µ—Ä–µ–Ω—ã? –£ –≤–∞—Å –º–∞–ª–æ –ø—Ä–∏–ø–∞—Å–æ–≤!")
            
        # –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è
        teleport_to_floor(player, floor)
        self.last_floor_visited = floor
        
        return True
        
    def _check_player_ready(self, player: Player) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞"""
        warnings = []
        
        if player.stats.health < 50:
            warnings.append("–ù–∏–∑–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ")
        if player.stats.endurance < 30:
            warnings.append("–ù–∏–∑–∫–∞—è –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å")
        if len(player.backpack) == 0:
            warnings.append("–ü—É—Å—Ç–æ–π —Ä—é–∫–∑–∞–∫")
            
        if warnings:
            show_warnings(warnings)
            return ask_confirmation("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?")
            
        return True
```

### 5.2 –í—ã–±–æ—Ä —ç—Ç–∞–∂–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      –í–´–ë–û–† –≠–¢–ê–ñ–ê –ü–û–î–ó–ï–ú–ï–õ–¨–Ø         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ  –≠—Ç–∞–∂ 1:  ‚úì –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω          ‚îÇ
‚îÇ  –≠—Ç–∞–∂ 2:  ‚úì –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω          ‚îÇ
‚îÇ  –≠—Ç–∞–∂ 3:  ‚ö†Ô∏è –ù–µ—Å—Ç–∞–±–∏–ª–µ–Ω (–±—É–¥–µ—Ç      ‚îÇ
‚îÇ           –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ)    ‚îÇ
‚îÇ  –≠—Ç–∞–∂ 4:  üîí –ù–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω          ‚îÇ
‚îÇ  ...                                ‚îÇ
‚îÇ  –≠—Ç–∞–∂ 20: üîí –ù–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω          ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  [–í–æ–π—Ç–∏ –Ω–∞ —ç—Ç–∞–∂: 3]                 ‚îÇ
‚îÇ  [–û—Ç–º–µ–Ω–∞]                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 6. –£–ª—É—á—à–µ–Ω–∏—è –ß–µ—Ä–¥–∞–∫–∞

### 6.1 –°–∏—Å—Ç–µ–º–∞ –∞–ø–≥—Ä–µ–π–¥–æ–≤

```python
class AtticUpgrades:
    """–£–ª—É—á—à–µ–Ω–∏—è —á–µ—Ä–¥–∞–∫–∞"""
    
    UPGRADES = {
        "storage_expansion": {
            "name": "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞",
            "cost": {"gold": 1000, "wood": 50},
            "effect": "storage_capacity +50%"
        },
        "advanced_workbench": {
            "name": "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–µ—Ä—Å—Ç–∞–∫",
            "cost": {"gold": 2000, "iron": 30},
            "effect": "unlock_advanced_recipes"
        },
        "library_upgrade": {
            "name": "–£–ª—É—á—à–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏",
            "cost": {"gold": 1500, "books": 10},
            "effect": "better_riddle_hints"
        },
        "comfort_upgrade": {
            "name": "–ö–æ–º—Ñ–æ—Ä—Ç",
            "cost": {"gold": 500, "cloth": 20},
            "effect": "rest_bonus +20%"
        }
    }
    
    def __init__(self):
        self.purchased_upgrades = []
        
    def purchase_upgrade(self, upgrade_id: str, player: Player) -> bool:
        """–ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è"""
        upgrade = self.UPGRADES.get(upgrade_id)
        
        if not upgrade or upgrade_id in self.purchased_upgrades:
            return False
            
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
        if not player.has_resources(upgrade['cost']):
            return False
            
        # –ü–æ–∫—É–ø–∫–∞
        player.spend_resources(upgrade['cost'])
        self.purchased_upgrades.append(upgrade_id)
        self._apply_upgrade(upgrade_id)
        
        return True
```

### 6.2 –î–æ—Å—Ç—É–ø–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

| –£–ª—É—á—à–µ–Ω–∏–µ | –°—Ç–æ–∏–º–æ—Å—Ç—å | –≠—Ñ—Ñ–µ–∫—Ç |
|-----------|-----------|--------|
| –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ | 1000üí∞ + 50ü™µ | +50% –∫ –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å—É–Ω–¥—É–∫–æ–≤ |
| –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–µ—Ä—Å—Ç–∞–∫ | 2000üí∞ + 30‚öôÔ∏è | –î–æ—Å—Ç—É–ø –∫ —Å–ª–æ–∂–Ω—ã–º —Ä–µ—Ü–µ–ø—Ç–∞–º |
| –£–ª—É—á—à–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ | 1500üí∞ + 10üìö | –õ—É—á—à–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∑–∞–≥–∞–¥–æ–∫ |
| –ö–æ–º—Ñ–æ—Ä—Ç | 500üí∞ + 20üßµ | +20% –∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –ø—Ä–∏ –æ—Ç–¥—ã—Ö–µ |
| –ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è | 3000üí∞ + 50üîÆ | –°–æ–∑–¥–∞–Ω–∏–µ –º–æ—â–Ω—ã—Ö –∑–µ–ª–∏–π |
| –°—Ç–æ–ª –∑–∞—á–∞—Ä–æ–≤–∞–Ω–∏—è | 5000üí∞ + 100‚ú® | –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä—É–Ω |

---

## 7. –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ –ß–µ—Ä–¥–∞–∫–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ü™ü        –ß–ï–†–î–ê–ö (60x40)            ü™ü     ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞    üó∫Ô∏è –ö–∞—Ä—Ç–∞    üî¨ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è‚îÇ
‚îÇ  [–ö–Ω–∏–∂–Ω—ã–µ –ø–æ–ª–∫–∏]  [–°—Ç–æ–ª]     [–°—Ç–æ–ª]        ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  üõèÔ∏è –ö—Ä–æ–≤–∞—Ç—å      üî• –ö–æ—Å—Ç–µ—Ä                  ‚îÇ
‚îÇ  [–ó–æ–Ω–∞ –æ—Ç–¥—ã—Ö–∞]   [–ì–æ—Ç–æ–≤–∫–∞]                 ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ              üï≥Ô∏è –í–•–û

–î                          ‚îÇ
‚îÇ           [–í –ü–û–î–ó–ï–ú–ï–õ–¨–ï]                    ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  üîß –í–µ—Ä—Å—Ç–∞–∫      ‚öóÔ∏è –ê–ª—Ö–∏–º–∏—è   ‚ú® –ó–∞—á–∞—Ä–æ–≤–∞–Ω–∏–µ‚îÇ
‚îÇ  [–ö—Ä–∞—Ñ—Ç]        [–ó–µ–ª—å—è]      [–†—É–Ω—ã]        ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  üì¶ –•—Ä–∞–Ω–∏–ª–∏—â–µ                               ‚îÇ
‚îÇ  [–°—É–Ω–¥—É–∫ 1] [–°—É–Ω–¥—É–∫ 2] [–°—É–Ω–¥—É–∫ 3]          ‚îÇ
‚îÇ  [–°—É–Ω–¥—É–∫ 4] [–°—É–Ω–¥—É–∫ 5] [–°—É–Ω–¥—É–∫ 6]          ‚îÇ
‚îÇ                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 8. –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –ß–µ—Ä–¥–∞–∫–∞

### 8.1 –í–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å
- üïØÔ∏è –¢–µ–ø–ª–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –æ—Ç —Å–≤–µ—á–µ–π –∏ –∫–æ—Å—Ç—Ä–∞
- üìö –°—Ç–∞—Ä—ã–µ –∫–Ω–∏–≥–∏ –∏ —Å–≤–∏—Ç–∫–∏ –ø–æ–≤—Å—é–¥—É
- üó∫Ô∏è –ö–∞—Ä—Ç—ã –Ω–∞ —Å—Ç–µ–Ω–∞—Ö
- ‚öóÔ∏è –ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–±–æ—Ä—ã
- üîÆ –°–≤–µ—Ç—è—â–∏–µ—Å—è —Ä—É–Ω—ã

### 8.2 –ó–≤—É–∫–æ–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ
- –ü–æ—Ç—Ä–µ—Å–∫–∏–≤–∞–Ω–∏–µ –∫–æ—Å—Ç—Ä–∞
- –®–µ–ª–µ—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü
- –¢–∏–∫–∞–Ω—å–µ —á–∞—Å–æ–≤
- –ó–≤—É–∫–∏ –¥–æ–∂–¥—è –∑–∞ –æ–∫–Ω–æ–º (–∏–Ω–æ–≥–¥–∞)
- –°–ø–æ–∫–æ–π–Ω–∞—è —Ñ–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞

### 8.3 –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- –ú–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥–∏ (–ø–æ–¥—Å–∫–∞–∑–∫–∏)
- –ú–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ–∫–Ω–æ (–ø–æ–≥–æ–¥–∞, –≤—Ä–µ–º—è —Å—É—Ç–æ–∫)
- –ú–æ–∂–Ω–æ –∏–∑—É—á–∞—Ç—å –∫–∞—Ä—Ç—É (–æ—Ç–º–µ—á–∞—Ç—å –ª–æ–∫–∞—Ü–∏–∏)
- –ú–æ–∂–Ω–æ —Å–ª—É—à–∞—Ç—å –º—É–∑—ã–∫–∞–ª—å–Ω—É—é —à–∫–∞—Ç—É–ª–∫—É

---

–ß–µ—Ä–¥–∞–∫ - —ç—Ç–æ –≤–∞—à –¥–æ–º –≤ –æ–ø–∞—Å–Ω–æ–º –º–∏—Ä–µ –ø–æ–¥–∑–µ–º–µ–ª—å—è! üè†‚ú®
