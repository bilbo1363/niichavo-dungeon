# Этап 2: Полная реализация функционала и механик

## Общая информация

**Цель этапа**: Расширить и углубить игровые механики, добавить контент, улучшить графику и звук

**Длительность**: 4-6 недель

**Статус**: Планирование

---

## 1. Расширенная боевая система (Неделя 1)

### 1.1 Разнообразие оружия
- [ ] **Ближний бой**
  - Кинжал (быстрый, слабый)
  - Меч (средний)
  - Топор (медленный, сильный)
  - Молот (очень медленный, очень сильный)
  
- [ ] **Дальний бой**
  - Лук (требует стрелы)
  - Арбалет (сильнее, медленнее)
  - Метательные ножи
  
- [ ] **Магическое оружие**
  - Посох огня
  - Посох льда
  - Посох молний

### 1.2 Характеристики оружия
- [ ] Урон
- [ ] Скорость атаки
- [ ] Дальность
- [ ] Критический удар (шанс и множитель)
- [ ] Специальные эффекты (огонь, лёд, яд)

### 1.3 Комбо-система
- [ ] Цепочки атак (3-5 ударов)
- [ ] Бонусный урон за комбо
- [ ] Визуальные эффекты комбо
- [ ] Счётчик комбо в UI

### 1.4 Защита и уклонение
- [ ] Блок (уменьшает урон на 50%)
- [ ] Уклонение (рывок, тратит выносливость)
- [ ] Парирование (идеальный тайминг)
- [ ] Контратака после парирования

### 1.5 Расширенный AI врагов
- [ ] Разные паттерны атак
- [ ] Групповая тактика
- [ ] Отступление при низком HP
- [ ] Вызов подкрепления
- [ ] Боссы с уникальными механиками

---

## 2. Система прокачки (Неделя 1-2)

### 2.1 Опыт и уровни
- [ ] Получение опыта за убийство врагов
- [ ] Получение опыта за решение загадок
- [ ] Получение опыта за исследование
- [ ] Уровни игрока (1-20)
- [ ] Визуальный прогресс-бар опыта

### 2.2 Характеристики
- [ ] **Сила** - увеличивает урон
- [ ] **Ловкость** - увеличивает скорость атаки и уклонения
- [ ] **Выносливость** - увеличивает HP и выносливость
- [ ] **Интеллект** - увеличивает урон магии
- [ ] **Удача** - увеличивает шанс критов и дропа

### 2.3 Навыки и способности
- [ ] **Дерево навыков** (3 ветки)
  - Воин (ближний бой)
  - Разбойник (скрытность, ловкость)
  - Маг (магия, руны)
  
- [ ] **Активные способности**
  - Мощный удар
  - Вихрь клинков
  - Огненный шар
  - Лечение
  - Невидимость
  
- [ ] **Пассивные способности**
  - Увеличение урона
  - Увеличение HP
  - Регенерация
  - Сопротивление урону

---

## 3. Расширенная система предметов (Неделя 2)

### 3.1 Типы предметов
- [ ] **Оружие** (20+ видов)
- [ ] **Броня** (шлем, нагрудник, перчатки, ботинки)
- [ ] **Аксессуары** (кольца, амулеты)
- [ ] **Расходники** (зелья, свитки, еда)
- [ ] **Ключевые предметы** (ключи, артефакты)
- [ ] **Материалы** (для крафта)

### 3.2 Система крафта
- [ ] Верстак на чердаке
- [ ] Рецепты крафта
- [ ] Комбинирование материалов
- [ ] Улучшение оружия
- [ ] Создание зелий

### 3.3 Система улучшений
- [ ] Улучшение оружия (+1, +2, +3...)
- [ ] Зачарование предметов
- [ ] Вставка камней (сокеты)
- [ ] Перековка характеристик

### 3.4 Наборы предметов
- [ ] Комплекты брони (2/4/6 предметов)
- [ ] Бонусы за полный набор
- [ ] Тематические наборы (огонь, лёд, тьма)

---

## 4. Расширенная генерация уровней (Неделя 2-3)

### 4.1 Типы комнат
- [ ] **Обычные комнаты** (коридоры, залы)
- [ ] **Сокровищницы** (много предметов)
- [ ] **Арены** (волны врагов)
- [ ] **Библиотеки** (загадки, знания)
- [ ] **Алтари** (улучшения, благословения)
- [ ] **Магазины** (торговец)
- [ ] **Ловушки** (шипы, стрелы, огонь)

### 4.2 Биомы
- [ ] **Подземелье** (1-5 этаж) - камень, крысы
- [ ] **Катакомбы** (6-10 этаж) - кости, нежить
- [ ] **Пещеры** (11-15 этаж) - кристаллы, элементали
- [ ] **Бездна** (16-20 этаж) - тьма, демоны

### 4.3 Особые этажи
- [ ] **Этаж-магазин** (каждый 5-й этаж)
- [ ] **Этаж-босс** (каждый 10-й этаж)
- [ ] **Секретные этажи** (случайные порталы)

### 4.4 Интерактивные объекты
- [ ] Рычаги и двери
- [ ] Телепорты
- [ ] Фонтаны (лечение)
- [ ] Статуи (благословения)
- [ ] Книжные полки (знания)

---

## 5. Расширенная система загадок (Неделя 3)

### 5.1 Типы загадок
- [ ] **Математические** (уже есть)
- [ ] **Логические** (уже есть)
- [ ] **Словесные** (анаграммы, ребусы)
- [ ] **Визуальные** (найди отличия, паттерны)
- [ ] **Музыкальные** (повтори мелодию)
- [ ] **Механические** (головоломки со сдвигом)

### 5.2 Сложность загадок
- [ ] Лёгкие (1-5 этаж)
- [ ] Средние (6-10 этаж)
- [ ] Сложные (11-15 этаж)
- [ ] Очень сложные (16-20 этаж)

### 5.3 Награды за загадки
- [ ] Опыт
- [ ] Редкие предметы
- [ ] Золото
- [ ] Знания (открывают рецепты)

### 5.4 Система блокнота
- [ ] **Блокнот для записей**
  - Автоматическая запись информации из решённых загадок
  - Запись подсказок и лора из диалогов
  - Карта подземелья (открытые этажи)
  - Бестиарий (встреченные враги)
  - Журнал квестов
  
- [ ] **UI блокнота**
  - Открытие по клавише (например, J)
  - Вкладки: Загадки, Карта, Бестиарий, Квесты, Лор
  - Поиск по записям
  - Закладки на важные страницы
  
- [ ] **Интеграция с загадками**
  - После решения загадки информация сохраняется в блокнот
  - Решённые загадки меняют внешний вид (серые с галочкой)
  - Можно перечитать информацию в любой момент

---

## 6. Экономика и торговля (Неделя 3)

### 6.1 Валюта
- [ ] Золото (основная валюта)
- [ ] Кристаллы (премиум валюта)
- [ ] Души (за убийство боссов)

### 6.2 Торговец
- [ ] NPC-торговец на чердаке
- [ ] Покупка предметов
- [ ] Продажа предметов
- [ ] Ремонт снаряжения
- [ ] Случайный ассортимент

### 6.3 Магазины на этажах
- [ ] Случайные магазины (каждый 5-й этаж)
- [ ] Специализированные (оружие, броня, зелья)
- [ ] Чёрный рынок (редкие предметы)

---

## 7. Улучшенная графика (Неделя 4)

### 7.1 Спрайты и анимации
- [ ] Спрайты игрока (8 направлений)
- [ ] Анимации ходьбы
- [ ] Анимации атаки
- [ ] Анимации получения урона
- [ ] Спрайты всех врагов
- [ ] Анимации врагов

### 7.2 Тайлсеты
- [ ] Улучшенные тайлы пола
- [ ] Улучшенные тайлы стен
- [ ] Декорации (факелы, черепа, растения)
- [ ] Анимированные тайлы (вода, лава)

### 7.3 Эффекты
- [ ] Улучшенные частицы
- [ ] Освещение (факелы, магия)
- [ ] Тени
- [ ] Погодные эффекты (туман, дождь)
- [ ] Экранные эффекты (тряска, затемнение)

### 7.4 UI/UX
- [ ] Красивые иконки предметов
- [ ] Анимированные кнопки
- [ ] Плавные переходы
- [ ] Тултипы с информацией
- [ ] Миникарта

---

## 8. Звуковое сопровождение (Неделя 4)

### 8.1 Музыка
- [ ] Главная тема (меню)
- [ ] Музыка чердака (спокойная)
- [ ] Музыка подземелья (напряжённая)
- [ ] Музыка боя (динамичная)
- [ ] Музыка босса (эпичная)
- [ ] Музыка финала

### 8.2 Звуковые эффекты
- [ ] **Движение**
  - Шаги по камню
  - Шаги по воде
  - Открытие дверей
  
- [ ] **Бой**
  - Удары мечом
  - Выстрелы из лука
  - Магические заклинания
  - Получение урона
  - Смерть врага
  
- [ ] **UI**
  - Клик кнопки
  - Открытие меню
  - Подбор предмета
  - Использование предмета
  
- [ ] **Окружение**
  - Эмбиент подземелья
  - Капающая вода
  - Ветер
  - Крики врагов вдали

### 8.3 Система звука
- [ ] Регулировка громкости (музыка/эффекты)
- [ ] 3D звук (позиционный)
- [ ] Затухание звука с расстоянием
- [ ] Эхо в больших комнатах

---

## 9. Расширенный сюжет (Неделя 5)

### 9.1 Больше диалогов
- [ ] Диалоги на каждом 5-м этаже
- [ ] Диалоги с торговцем
- [ ] Диалоги с духами
- [ ] Воспоминания (флешбэки)

### 9.2 Квесты
- [ ] **Основные квесты**
  - Найти все руны
  - Победить всех боссов
  - Раскрыть тайну подземелья
  
- [ ] **Побочные квесты**
  - Собрать коллекцию предметов
  - Убить определённых врагов
  - Найти секретные комнаты
  - Помочь духам

### 9.3 Лор и история
- [ ] Записки предыдущих искателей
- [ ] Книги с историей мира
- [ ] Надписи на стенах
- [ ] Видения прошлого

### 9.4 Множественные концовки
- [ ] **Хорошая концовка** - спасти всех
- [ ] **Нейтральная концовка** - просто выжить
- [ ] **Плохая концовка** - поддаться тьме
- [ ] **Секретная концовка** - найти истину

---

## 10. Дополнительные механики (Неделя 5-6)

### 10.1 Система репутации
- [ ] Репутация с фракциями
- [ ] Влияет на цены в магазинах
- [ ] Открывает уникальные квесты
- [ ] Влияет на концовку

### 10.2 Система достижений
- [ ] 50+ достижений
- [ ] Награды за достижения
- [ ] Статистика игрока
- [ ] Интеграция с Steam (будущее)

### 10.3 Режимы сложности
- [ ] **Лёгкий** - для новичков
- [ ] **Нормальный** - стандарт
- [ ] **Сложный** - для опытных
- [ ] **Хардкор** - одна жизнь

### 10.4 Нью Гейм+
- [ ] Начать заново с сохранением прогресса
- [ ] Увеличенная сложность
- [ ] Новые предметы
- [ ] Новые враги

### 10.5 Ежедневные испытания
- [ ] Случайный этаж каждый день
- [ ] Особые условия
- [ ] Таблица лидеров
- [ ] Уникальные награды

---

## 11. Оптимизация и полировка (Неделя 6)

### 11.1 Производительность
- [ ] Оптимизация рендеринга
- [ ] Кэширование спрайтов
- [ ] Пулы объектов
- [ ] Многопоточность (если нужно)
- [ ] Профилирование и устранение узких мест

### 11.2 Баланс
- [ ] Настройка урона всех врагов
- [ ] Настройка стоимости предметов
- [ ] Настройка дропа
- [ ] Кривая сложности
- [ ] Тестирование прохождения

### 11.3 Качество жизни
- [ ] Автосохранение
- [ ] Быстрое перемещение (телепорты)
- [ ] Сортировка инвентаря
- [ ] Фильтры предметов
- [ ] Горячие клавиши для зелий

### 11.4 Локализация
- [ ] Поддержка русского языка (уже есть)
- [ ] Поддержка английского языка
- [ ] Система перевода
- [ ] Переводимые строки

---

## 12. Приоритеты реализации

### Высокий приоритет (Must Have)
1. Разнообразие оружия и врагов
2. Система прокачки
3. Улучшенная графика
4. Звуковое сопровождение
5. Расширенный сюжет

### Средний приоритет (Should Have)
6. Система крафта
7. Торговля и экономика
8. Больше типов загадок
9. Квесты
10. Биомы

### Низкий приоритет (Nice to Have)
11. Достижения
12. Режимы сложности
13. Нью Гейм+
14. Ежедневные испытания
15. Локализация на английский

---

## 13. Метрики успеха

### Количественные
- [ ] 20+ видов оружия
- [ ] 15+ типов врагов
- [ ] 4 босса
- [ ] 100+ предметов
- [ ] 50+ загадок
- [ ] 20+ диалогов
- [ ] 30+ звуковых эффектов
- [ ] 6+ музыкальных треков

### Качественные
- [ ] Игра интересна 3+ часа
- [ ] Хочется пройти повторно
- [ ] Баланс ощущается справедливым
- [ ] Графика приятна глазу
- [ ] Звук погружает в атмосферу
- [ ] Сюжет захватывает

---

## 14. Риски и митигация

### Технические риски
- **Риск**: Падение производительности
  - **Митигация**: Регулярное профилирование
  
- **Риск**: Сложность AI
  - **Митигация**: Итеративная разработка
  
- **Риск**: Баги в сохранениях
  - **Митигация**: Тщательное тестирование

### Контентные риски
- **Риск**: Недостаточно контента
  - **Митигация**: Процедурная генерация
  
- **Риск**: Плохой баланс
  - **Митигация**: Плейтесты и аналитика
  
- **Риск**: Скучный сюжет
  - **Митигация**: Фокус-группы, итерации

---

## 15. Следующие шаги

### Неделя 1
1. Начать с боевой системы
2. Добавить 5 новых видов оружия
3. Улучшить AI врагов
4. Добавить 3 новых типа врагов

### Неделя 2
1. Реализовать систему опыта
2. Создать дерево навыков
3. Добавить 20 новых предметов
4. Начать работу над крафтом

### Неделя 3
1. Создать биомы
2. Добавить особые комнаты
3. Расширить загадки
4. Добавить торговца

### Неделя 4
1. Улучшить графику
2. Добавить анимации
3. Создать звуковые эффекты
4. Написать музыку

### Неделя 5
1. Расширить сюжет
2. Добавить квесты
3. Создать концовки
4. Написать лор

### Неделя 6
1. Оптимизация
2. Баланс
3. Полировка
4. Финальное тестирование

---

## 16. Заключение

Этап 2 значительно расширит игру, добавив глубину механик, разнообразие контента и профессиональную полировку. После завершения этого этапа игра будет готова к публичному релизу.

**Ожидаемый результат**: Полноценная roguelike игра с 5-10 часами геймплея, высокой реиграбельностью и профессиональным качеством.
